~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~
19강 RAID의 정의와 종류
~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~
1TB 하드 디스크 네 개로 RAID를 구성하면
4TB 하드 디스크 한 개의 성능과 안전성을 능가할 수 있다.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
RAID(Redundant Array of Independent Disks)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
RAID의 정의
 - 하드 디스크와 SSD로 사용하는 기술
 - 데이터의 안전성 혹은 높은 성능을 위해 여러 물리적 보조기억장치를 마치 하나의 논리적 보조기억장치처럼 사용하는 기술

RAID 레벨
 - RAID를 구성하는 기술
 - RAID 0, RAID 1, RAID2, RAID3, RAID4, RAID5, RAID6
 - 그로부터 파생된 RAID 10, RAID50, ...

RAID 0
 - 각 하드 디스크는 번갈아 가며 데이터를 저장합니다.
   저장되는 데이터가 하드 디스크 개수만큼 나누어 저장
 - 스트라입(stripe) : 마치 출무늬처럼 분산되어 저장된 데이터
 - 스트라이핑(striping) : 분산하여 저장하는 것
 - 장점 : 입출력 속도의 향상
 - 단점 : 저장된 정보가 안전하지 않음

RAID 1
 - 미러링(mirroring) : 복사본을 만드는 방식
   데이터를 쓸 때 원본과 복사본 두 군데에 씀 (느린 쓰기 속도)
 - 단점 : 하드 디스크 개수가 한정되었을 때 사용가능한 용량이 적어짐
         복사본이 만들어지는 용량만큼 사용 불가 -> 많은 양의 하드 디스크가 필요 -> 비용 증가

RAID 4
 - (RAID 1처럼 완전한 복사본을 만드는 대신) 패리티 비트를 저장
 - 패리티를 저장한 장치를 이용해 다른 장치들의 오류를 검출하고, 오류가 있다면 복구
 - 패리티 비트는 오류 검출만 가능할 뿐 오류 복구는 불가능
 - 단점 : 패리티 디스크의 병목

RAID 5
 - 패리티 정보를 분산하여 저장하는 방식
 - RAID 4는 패리티를 저장한 장치를 따로 두는 방식이고,
   RAID 5는 패리티를 분산하여 저장하는 방식입니다.

RAID 6
 - 두 종류의 패리티(오류를 검출하고 복구할 수 있는 수단)
   RAID 5보다 안전, 쓰기는 RAID 5보다 느림

RAID
 - 각 RAID 레벨마다 장단점이 있음
 - 어떤 상황에서 무엇을 최우선으로 원하는지에 따라 최적의 RAID 레벨은 달라질 수 있음
 - 각 RAID 레벨의 대략적인 구성과 특징을 아는 것이 중요
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
플래시 메모리
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
전기적으로 데이터를 읽고 쓰는 반도체 기반 저장 장치
 - 범용성이 넓기에 보조기억장치에'만' 속한다고 보기는 어려움

플래시 메모리의 종류
 - NAND 플래시 메모리 (오늘날 많이 사용하는 것)
 - NOR 플래시 메모리

셀(cell)
 - 플래시 메모리에서 데이터를 저장하는 가장 작은 단위
 - 이 셀이 모이고 모여 수 MB, GB, TB 저장 장치가 된다
 - 한 셀에
   1 비트를 저장할 수 있는 플래시 메모리: SLC
   2 비트를 저장할 수 있는 플래시 메모리: MLC
   3 비트를 저장할 수 있는 플래시 메모리: TLC
   4 비트를 저장할 수 있는 플래시 메모리: QLC

SLC / MLC / TLC
 - 사람 한 명 == 1 비트
 - 셀        == 집     이라 생각해보면
 -> SLC     == 한 집에 한 명
 -> MLC     == 한 집에 두 명
 -> TLC     == 한 집에 세 명

SLC
 - 한 셀로 두 개의 정보 표현
 - 비트의 빠른 입출력
 - 긴 수명 (플래시 메모리, (USB, SSD, SD카드), 하드 디스크에는 수명이 있다)
 - 용량 대비 고가격

MLC
 - 한 셀로 네 개의 정보 표현(대용량화 유리)
 - SLC보다 느린 입출력
 - SLC보다 짧은 수명
 - SLC보다 저렴
 - 시중에서 많이 사용(MLC,TLC,QLC)

TLC
 - 한 셀로 여덟 개의 정보 표현(대용량화 유리)
 - MLC보다 느린 입출력
 - MLC보다 짧은 수명
 - MLC보다 저렴
 - 시중에서 많이 사용(MLC,TLC,QLC)

 => 같은 플래시 메모리라도 수명, 가격, 성능이 다르다


저장 단위
 - 셀(cell)
   - 플래시 메모리에서 데이터를 저장하는 가장 작은 단위
   - 이 셀이 모이고 모여 수 MB, GB, TB 저장 장치가 된다
   - 셀들이 모여 페이지(page)
   - 페이지들이 블록(block)
   - 블록이 모여 플레인(plane)
   - 플레인이 모여 다이(die)
 - 읽기/쓰기 단위와 삭제 단위는 다르다
   - 읽기와 쓰기는 페이지 단위로 이루어짐
   - 삭제는 (페이지보다 큰) 블록 단위로 이루어짐
 - 페이지의 상태
   - Free 상태
     : 어떠한 데이터도 저장하고 있지 않아 새로운 데이터를 저장할 수 있는 상태
   - Valid 상태
     : 이미 유효한 데이터를 저장하고 있는 상태
   - Invalid 상태
     : 유효하지 않은 데이터(쓰레기값)를 저장하고 있는 상태
   - 플래시 메모리는 하드 디스크와 달리 덮어쓰기가 불가능
 - 가비지 컬렉션
   : 유효한 페이지들만 새로운 블록으로 복사한 후 기존 블록을 삭제하여 공간을 정리하는 기능
   1. 유효한 페이지들만을 새로운 블록으로 복사
   2. 기존의 블록을 삭제

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
마무리
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
4가지 키워드로 정리하는 핵심 포인트
- 저장 장치 계층 구조는 각기 다른 용량과 성능의 저장 장치들을 계층화하여 표현한 구조입니다.
- 캐시 메모리는 CPU의 연산 속도와 메모리 접근 속도의 차이를 줄이기 위한 저장 장치입니다.
- 캐시 적중률이 높으면 CPU의 메모리 접근 횟수를 줄일 수 있습니다.
- 캐시 메모리는 참조 지역성의 원리에 따라 데이터를 예측하여 캐시 적중률을 높입니다.

확인문제
1. 다음 보기에 있는 저장 장치들로 저장 장치 계층 구조 도식도를 채우세요.
   보기 메모리, 보조기억장치, 캐시 메모리, 레지스터
   ::::::::: 답 ① 레지스터 ② 캐시 메모리 ③ 메모리 ④ 보조기억장치 :::::::::

2. 캐시 메모리와 관련된 설명 중 옳지 않은 것을 고르세요.
   ① 캐시 메모리는 CPU가 사용할 법한 데이터를 저장합니다.
   ② 캐시 메모리는 참조 지역성의 원리에 입각해 데이터를 가져와 저장합니다.
   ③ 캐시 메모리는 메모리와 CPU 사이에 위치합니다.
   ④ 캐시 적중률이 높으면 캐시 메모리의 성능이 떨어집니다.
   ::::::::: 답 ④ :::::::::