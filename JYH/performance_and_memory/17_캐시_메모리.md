# 캐시 메모리

CPU의 빠른 연산 속도와 상대적으로 느린 메모리 접근 속도 사이의 간극을 줄이기 위한 핵심 하드웨어인 **캐시 메모리**의 개념과 원리를 정리합니다.

---

## 1. 저장 장치 계층 구조 (Memory Hierarchy)

저장 장치는 속도, 용량, 가격 사이의 관계에 따라 계층적으로 구성됩니다.
* **상위 계층**: CPU와 가깝고 속도가 빠르지만, 용량이 작고 가격이 비쌉니다. (예: 레지스터)
* **하위 계층**: CPU와 멀고 속도가 느리지만, 용량이 크고 가격이 저렴합니다. (예: 보조기억장치)
* **결론**: 성능과 비용의 효율성을 위해 다양한 저장 장치를 계층적으로 배치하여 사용합니다.

---

## 2. 캐시 메모리 (Cache Memory)의 정의

* **정의**: CPU와 메모리 사이에 위치한 **SRAM 기반**의 저장 장치입니다.
* **목적**: CPU가 메모리에 접근하는 시간을 줄여 전체적인 시스템 성능을 향상시킵니다.
* **비유**: 멀리 있는 대형 마트(메모리)에 매번 가기 힘들어, 자주 사용하는 물건을 집 근처 편의점(캐시 메모리)에 미리 가져다 놓는 것과 같습니다.

---

## 3. 계층적 캐시 메모리 (L1, L2, L3)

현대 CPU는 캐시 메모리를 여러 단계로 구성하여 효율을 극대화합니다.
* **L1 캐시**: 코어와 가장 가까우며 가장 빠릅니다. (명령어용 L1i와 데이터용 L1d로 분리되기도 함)
* **L2 캐시**: L1 다음으로 빠르며 각 코어마다 별도로 가지는 경우가 많습니다.
* **L3 캐시**: 여러 코어가 공유하여 사용하며, 세 캐시 중 용량이 가장 큽니다.

---

## 4. 캐시 히트와 적중률

캐시 메모리는 CPU가 자주 사용할 법한 데이터를 미리 예측하여 저장합니다.
* **캐시 히트 (Cache Hit)**: CPU가 필요로 하는 데이터가 캐시 메모리에 있어 즉시 활용되는 성공적인 상황입니다.
* **캐시 미스 (Cache Miss)**: 데이터가 캐시에 없어 메모리에서 직접 가져와야 하는 상황으로, 성능 저하의 원인이 됩니다.
* **캐시 적중률**: `캐시 히트 횟수 / (캐시 히트 횟수 + 캐시 미스 횟수)`로 계산하며, 높을수록 성능이 좋습니다.

---

## 5. 참조 지역성의 원리 (Locality of Reference)

캐시 메모리가 효율적으로 동작하기 위해 데이터를 예측하는 두 가지 핵심 원칙입니다.

1. **시간 지역성 (Temporal Locality)**:
   * CPU는 최근에 접근했던 메모리 공간에 다시 접근하려는 경향이 있습니다.
   * 예: 코드 내의 **변수**는 프로그램 실행 중 여러 번 반복 사용됩니다.
2. **공간 지역성 (Spatial Locality)**:
   * CPU는 접근한 메모리 공간의 **인접한 주소**들을 접근하려는 경향이 있습니다.
   * 예: 관련 데이터나 배열, 프로그램 코드는 보통 메모리 상에 모여서 저장됩니다.

---

## 6. 최종 계층 구조 요약

| 계층 | 장치 | 특징 |
| :--- | :--- | :--- |
| **최상위** | 레지스터 | 가장 빠름, CPU 내부의 초소형 저장 공간 |
| **중상위** | 캐시 메모리 | SRAM 기반, 속도 차이 완화 (L1 -> L2 -> L3) |
| **중하위** | 메모리 (RAM) | DRAM 기반, 현재 실행 중인 프로그램 저장 |
| **최하위** | 보조기억장치 | SSD/HDD, 대용량 영구 저장 |