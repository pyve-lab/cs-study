# 메모리의 주소 공간: 물리 주소와 논리 주소

메모리 주소 체계는 하나가 아니라, CPU가 바라보는 주소와 실제 메모리 하드웨어가 사용하는 주소 두 가지로 나뉩니다.

---

## 1. 물리 주소와 논리 주소의 정의

메모리에 저장된 값은 실행될 때마다 위치가 바뀌기 때문에, CPU는 실제 하드웨어 주소를 일일이 알기 어렵습니다. 이를 해결하기 위해 두 가지 주소 체계를 사용합니다.

* **물리 주소 (Physical Address)**: 메모리 하드웨어 입장에서 바라본 실제 주소입니다. 
* **논리 주소 (Logical Address)**: CPU와 실행 중인 프로그램 입장에서 바라본 주소입니다. 각 프로그램은 **0번지**부터 시작하는 자신만의 주소 공간을 가집니다. 

---

## 2. 주소 변환: MMU (Memory Management Unit)

CPU가 이해하는 논리 주소를 실제 메모리와 통신하기 위한 물리 주소로 바꾸어 주는 장치가 필요합니다.

* **MMU의 역할**: 논리 주소를 물리 주소로 변환하는 하드웨어 장치입니다. 
* **변환 공식**: `물리 주소 = 베이스 레지스터 값 + 논리 주소` 
    * **베이스 레지스터 (Base Register)**: 프로그램이 실제 메모리에 적재된 시작 주소(기준 주소)를 저장합니다. 
    * **논리 주소**: 프로그램의 시작점으로부터 얼마나 떨어져 있는지(오프셋)를 나타냅니다. 

> **예시**: 베이스 레지스터가 15,000이고 CPU가 논리 주소 100번에 접근하려 한다면, 실제 물리 주소인 15,100번지로 변환되어 접근합니다. 

---

## 3. 메모리 보호: 한계 레지스터 (Limit Register)

어떤 프로그램이 다른 프로그램의 메모리 영역을 침범하는 것을 막기 위한 보호 장치가 필수적입니다.

* **한계 레지스터의 역할**: 현재 실행 중인 프로그램의 **논리 주소의 최대 크기**를 저장합니다. 
* **보호 과정**:
    1. CPU가 접근하려는 논리 주소가 한계 레지스터 값보다 큰지 확인합니다. 
    2. 만약 한계 레지스터보다 큰 주소에 접근하려 한다면(범위를 벗어나면), 트랩(예외)을 발생시켜 실행을 막습니다. 
* **안전한 범위**: `베이스 레지스터 ≤ 실제 접근 주소 < 베이스 레지스터 + 한계 레지스터` 

---

## 4. 요약

1. **논리 주소**는 CPU가 사용하는 '프로그램마다 0번지부터 시작하는 주소'입니다.
2. **물리 주소**는 실제 메모리의 '하드웨어 주소'입니다.
3. **MMU**가 베이스 레지스터를 이용해 논리 주소를 물리 주소로 변환합니다.
4. **한계 레지스터**는 프로그램의 영역을 벗어나는 접근을 감시하여 다른 프로그램을 보호합니다. 