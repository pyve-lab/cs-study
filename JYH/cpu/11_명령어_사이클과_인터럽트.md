## 0. 명령어 사이클과 인터럽트

CPU는 메모리에서 명령어를 가져오고 실행하는 작업을 일정한 주기(패턴)에 따라 반복합니다. 이 흐름을 **명령어 사이클**이라 하며, 이 흐름을 끊고 긴급한 일을 먼저 처리하게 하는 신호를 **인터럽트**라고 합니다.

---

## 1. 명령어 사이클 (Instruction Cycle)

CPU가 하나의 명령어를 처리하는 과정은 크게 다음과 같은 단계로 나뉩니다.

1. **인출 사이클 (Fetch Cycle):** 메모리에 저장된 명령어를 CPU 내부(레지스터)로 갖고 오는 단계입니다.
2. **실행 사이클 (Execution Cycle):** 갖고 온 명령어를 제어장치가 해석하고 실행하는 단계입니다.
3. **간접 사이클 (Indirect Cycle):** 인출 후 바로 실행이 불가능하고 추가적인 메모리 접근이 필요한 경우(간접 주소 지정 방식 등)에 추가되는 단계입니다.
4. **인터럽트 사이클 (Interrupt Cycle):** 실행 사이클이 끝나고 다음 명령어를 인출하기 전, 발생한 인터럽트가 있는지 확인하고 처리하는 단계입니다.



---

## 2. 인터럽트 (Interrupt)

정해진 흐름을 방해하거나 중단시키는 신호를 말하며, CPU가 즉시 처리해야 할 중요한 작업이 생겼을 때 발생합니다.

### ① 인터럽트의 종류
* **동기 인터럽트 (예외, Exception):** CPU가 명령어를 실행하다가 예기치 못한 상황(0으로 나누기, 잘못된 주소 접근 등)을 만났을 때 발생합니다.
* **비동기 인터럽트 (하드웨어 인터럽트):** 주로 입출력 장치(키보드, 마우스, 프린터 등)에 의해 발생하며, 알림과 같은 역할을 합니다.

### ② 하드웨어 인터럽트의 필요성
* 입출력 장치는 CPU보다 속도가 매우 느립니다.
* 인터럽트가 없다면 CPU는 입출력이 끝날 때까지 주기적으로 상태를 확인(폴링)해야 하지만, 인터럽트를 사용하면 입출력 동안 CPU는 다른 업무를 보다가 완료 알림을 받고 처리할 수 있어 효율적입니다.

---

## 3. 하드웨어 인터럽트 처리 순서

인터럽트가 발생하면 CPU는 다음의 순서에 따라 현재 작업을 관리하고 새로운 작업을 처리합니다.

1. **인터럽트 요청 신호 (Interrupt Request Signal)**
   - 입출력 장치와 같은 외부 주체가 CPU에게 "지금 끼어들어도 될까요?"라는 의사를 전달하는 첫 단계입니다.
   - 이는 CPU의 정상적인 실행 흐름을 끊을 수 있다는 요청 신호입니다.

2. **인터럽트 플래그 확인 (Interrupt Flag Check)**
   - CPU는 요청 신호를 수신하면, 현재 실행 사이클을 마친 후 명령어를 인출하기 전에 플래그 레지스터 내의 **인터럽트 플래그**를 확인합니다.
   - **마스킹 가능 여부:** - **Maskable Interrupt:** 대부분의 입출력 장치 인터럽트는 이 플래그를 통해 처리 여부가 결정됩니다(거절 가능).
     - **Non-Maskable Interrupt (NMI):** 하드웨어 고장이나 정전과 같이 긴급한 상황은 플래그 설정과 관계없이 반드시 처리되어야 합니다.

3. **작업 백업 (Context Backup)**
   - 인터럽트 처리를 수락하면, CPU는 나중에 원래 작업을 중단된 지점부터 재개할 수 있도록 현재 상태 정보(레지스터 값 등)를 **스택(Stack)** 메모리 영역에 임시 저장합니다.

4. **서비스 루틴 실행 (Service Routine Execution)**
   - CPU는 **인터럽트 벡터**(식별 정보)를 참조하여 해당 인터럽트를 처리하는 프로그램인 **인터럽트 서비스 루틴(ISR)**의 시작 주소를 알아냅니다.
   - CPU는 이 주소로 이동하여 ISR을 실행하며 인터럽트 상황을 해결합니다.

5. **복구 및 재개 (Restore and Resume)**
   - ISR 실행이 완료되면, CPU는 스택에 백업해 두었던 이전 작업 상태를 다시 불러와 레지스터에 적재합니다.
   - 이 과정을 통해 CPU는 중단되었던 원래 작업을 정확히 이어서 수행할 수 있게 됩니다.



---

## 4. 주요 용어 정리

| 용어 | 의미 |
| :--- | :--- |
| **인터럽트 요청 신호** | CPU의 작업을 방해하는 인터럽트에 대한 요청 |
| **인터럽트 플래그** | 인터럽트 요청 신호를 받아들일지 무시할지를 결정하는 비트 |
| **인터럽트 벡터** | ISR의 시작 주소를 포함하는 인터럽트 서비스 루틴의 식별 정보 |
| **인터럽트 서비스 루틴(ISR)** | 인터럽트가 발생했을 때 이를 어떻게 처리할지 적힌 프로그램 |

---

## 5. 핵심 요약
* **명령어 사이클**은 인출 → (간접) → 실행 → (인터럽트) 순으로 반복됩니다.
* **하드웨어 인터럽트**는 CPU가 느린 입출력 장치를 기다리지 않고 효율적으로 일하게 해줍니다.
* 인터럽트 처리 시 현재 상태는 **스택**에 백업하며, **인터럽트 벡터**를 통해 찾은 **ISR**을 실행한 뒤 복구합니다.