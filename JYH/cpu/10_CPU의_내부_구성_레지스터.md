
## 0. CPU의 내부 구성 - 레지스터

CPU 내부에는 계산을 위한 ALU, 지휘를 위한 제어장치 외에도 데이터를 임시로 저장하는 **레지스터**가 존재합니다. 레지스터는 프로그램 실행 과정에서 값이 계속 변하므로, 이를 관찰하면 프로그램의 실행 원리를 가장 상세히 파악할 수 있습니다.

---

## 1. 반드시 알아야 할 주요 레지스터 8종

대부분의 CPU가 공통적으로 포함하고 있는 핵심 레지스터들입니다.

### ① 명령어 실행 필수 레지스터
* **프로그램 카운터 (PC):** 메모리에서 가져올 **다음 명령어의 주소**를 저장합니다.
* **명령어 레지스터 (IR):** 메모리에서 방금 읽어 들인, **지금 당장 해석할 명령어**를 저장합니다.
* **메모리 주소 레지스터 (MAR):** CPU가 읽고자 하는 **메모리의 주소**를 주소 버스로 내보내기 전 임시로 담는 곳입니다.
* **메모리 버퍼 레지스터 (MBR):** 메모리와 주고받을 **데이터나 명령어**를 데이터 버스로 이동시키기 전 거치는 장소입니다.



### ② 범용 및 상태 레지스터
* **범용 레지스터:** 데이터와 주소를 **제한 없이 자유롭게** 담을 수 있는 일반적인 목적의 레지스터입니다.
* **플래그 레지스터:** 연산 결과에 대한 **부가 정보**(양수/음수, 0 여부 등)를 저장합니다.

### ③ 주소 지정 특수 레지스터
* **스택 포인터:** 스택 주소 지정 방식에 사용되며, **스택의 꼭대기(데이터가 차 있는 위치)**를 가리킵니다.
* **베이스 레지스터:** 변위 주소 지정 방식에서 **기준 주소** 역할을 수행합니다.

---

## 2. 프로그램의 순차 실행 원리 (Step-by-Step)

CPU가 메모리 속 명령어를 차례대로 가져와 실행하는 구체적인 메커니즘입니다.

1. **PC 주소 저장**: 실행할 명령어 주소(예: 1000번지)가 PC에 담깁니다.
2. **MAR 복사**: PC의 주소가 MAR로 전달되어 주소 버스를 통해 메모리로 보내집니다.
3. **데이터 인출**: 메모리에서 읽어온 명령어가 데이터 버스를 타고 MBR에 저장됩니다.
4. **PC 값 증가**: 명령어를 인출하자마자 **PC 값은 자동으로 1 증가**하여 다음 명령어를 준비합니다. (순차 실행의 핵심)
5. **IR 이동 및 해석**: MBR의 명령어가 IR로 옮겨지고 제어장치가 이를 해석하여 실행합니다.

---

## 3. 변위 주소 지정 방식 (Displacement Addressing)

오퍼랜드 필드값(변위)과 특정 레지스터의 값을 더하여 유효 주소를 결정하는 방식입니다.

| 방식 | 수식 (유효 주소) | 특징 |
| :--- | :--- | :--- |
| **상대 주소 지정** | `프로그램카운터(PC) + 오퍼랜드 필드의 값` | 현재 위치를 기준으로 앞뒤(예: -3, +5)로 건너뛸 때 사용 |
| **베이스 레지스터 지정** | `베이스 레지스터 + 오퍼랜드 필드의 값` | 기준 주소(시작점)로부터 떨어진 거리를 이용해 데이터 접근 |



---