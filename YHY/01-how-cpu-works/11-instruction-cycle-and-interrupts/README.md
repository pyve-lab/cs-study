# π§  11κ°• λ…λ Ήμ–΄ μ‚¬μ΄ν΄κ³Ό μΈν„°λ½νΈ

CPUλ” λ©”λ¨λ¦¬μ— μ €μ¥λ **ν”„λ΅κ·Έλ¨(λ…λ Ήμ–΄ + λ°μ΄ν„°)** μ„ κ°€μ Έμ™€ μ‹¤ν–‰ν•κ³ , ν•„μ”ν•λ©΄ κ²°κ³Όλ¥Ό λ‹¤μ‹ λ©”λ¨λ¦¬μ— μ €μ¥ν•λ‹¤.  
μ΄λ• CPUμ λ™μ‘μ€ λ€λ¶€λ¶„ **μ •ν•΄μ§„ λ°λ³µ νλ¦„(μ£ΌκΈ°)** μ„ λ”°λΌ μ§„ν–‰λλ©°, μ΄ λ°λ³µ νλ¦„μ„ **λ…λ Ήμ–΄ μ‚¬μ΄ν΄(Instruction Cycle)** μ΄λΌκ³  ν•λ‹¤.

ν•μ§€λ§ μ‹¤ν–‰ λ„μ¤‘, μ™Έλ¶€ μ¥μΉλ‚ μμ™Έ μƒν™© λ•λ¬Έμ— CPUκ°€ **μ›λ νλ¦„μ„ μ κΉ λκ³ ** λ‹¤λ¥Έ μΌμ„ λ¨Όμ € μ²λ¦¬ν•΄μ•Ό ν•λ” κ²½μ°κ°€ μλ‹¤.  
μ΄ β€λΌμ–΄λ“¦β€ μ‹ νΈκ°€ λ°”λ΅ **μΈν„°λ½νΈ(Interrupt)** λ‹¤.

---

## π“ λ©μ°¨
- [π” λ…λ Ήμ–΄ μ‚¬μ΄ν΄](#-λ…λ Ήμ–΄-μ‚¬μ΄ν΄)
  - [π§Ύ ASCII λ‹¤μ΄μ–΄κ·Έλ¨: λ…λ Ήμ–΄ μ‚¬μ΄ν΄ νλ¦„](#-ascii-λ‹¤μ΄μ–΄κ·Έλ¨-λ…λ Ήμ–΄-μ‚¬μ΄ν΄-νλ¦„)
  - [1) μΈμ¶ μ‚¬μ΄ν΄](#1-μΈμ¶-μ‚¬μ΄ν΄)
  - [2) μ‹¤ν–‰ μ‚¬μ΄ν΄](#2-μ‹¤ν–‰-μ‚¬μ΄ν΄)
  - [3) κ°„μ ‘ μ‚¬μ΄ν΄](#3-κ°„μ ‘-μ‚¬μ΄ν΄)
- [β΅ μΈν„°λ½νΈ](#-μΈν„°λ½νΈ)
  - [π§© μΈν„°λ½νΈ μΆ…λ¥](#-μΈν„°λ½νΈ-μΆ…λ¥)
  - [π“¨ μΈν„°λ½νΈ μ”μ²­ μ‹ νΈ](#-μΈν„°λ½νΈ-μ”μ²­-μ‹ νΈ)
  - [π¦ μΈν„°λ½νΈ ν”λκ·Έ](#-μΈν„°λ½νΈ-ν”λκ·Έ)
  - [π§­ μΈν„°λ½νΈ λ²΅ν„°](#-μΈν„°λ½νΈ-λ²΅ν„°)
  - [π§‘β€π”§ μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄](#-μΈν„°λ½νΈ-μ„λΉ„μ¤-λ£¨ν‹΄isr)
  - [π›  ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ μ²λ¦¬ μμ„](#-ν•λ“μ›¨μ–΄-μΈν„°λ½νΈ-μ²λ¦¬-μμ„)
  - [π§Ύ ASCII λ‹¤μ΄μ–΄κ·Έλ¨: μΈν„°λ½νΈ μ²λ¦¬ νλ¦„](#-ascii-λ‹¤μ΄μ–΄κ·Έλ¨-μΈν„°λ½νΈ-μ²λ¦¬-νλ¦„)
- [β… ν• λ²μ— μ •λ¦¬](#-ν•-λ²μ—-μ •λ¦¬)

---

## π” λ…λ Ήμ–΄ μ‚¬μ΄ν΄

ν”„λ΅κ·Έλ¨ μ† λ…λ Ήμ–΄λ“¤μ€ **μΌμ •ν• μ£ΌκΈ°(ν¨ν„΄)** λ΅ λ°λ³µ μ‹¤ν–‰λλ‹¤.  
μ΄ λ°λ³µ νλ¦„μ„ **λ…λ Ήμ–΄ μ‚¬μ΄ν΄**μ΄λΌκ³  ν•λ‹¤.

![](<images/instruction-cycle-overview.png>)  
_λ…λ Ήμ–΄ μ‚¬μ΄ν΄ μ „μ²΄ νλ¦„ κ°λ…_

---

### π§Ύ ASCII λ‹¤μ΄μ–΄κ·Έλ¨: λ…λ Ήμ–΄ μ‚¬μ΄ν΄ νλ¦„

```text
(λ°λ³µ)
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  μΈμ¶(Fetch)  β”‚  β† λ©”λ¨λ¦¬μ—μ„ λ…λ Ήμ–΄ κ°€μ Έμ¤κΈ°
β””β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”
       β”‚
       v
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  μ‹¤ν–‰(Execute)β”‚  β† κ°€μ Έμ¨ λ…λ Ήμ–΄ μ‹¤ν–‰
β””β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”
       β”‚
       β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
       β”‚               β”‚ (μ¶”κ°€ λ©”λ¨λ¦¬ μ ‘κ·Ό ν•„μ” μ‹)
       v               v
   (λ‹¤μ μΈμ¶)     β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                   β”‚ κ°„μ ‘(Indirect)β”‚  β† μ ν¨ μ£Όμ†λ¥Ό μ–»κΈ° μ„ν•΄ λ©”λ¨λ¦¬ μ¶”κ°€ μ ‘κ·Ό
                   β””β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”
                          v
                      (μ‹¤ν–‰μΌλ΅ λ³µκ·€)
```

---

### 1) μΈμ¶ μ‚¬μ΄ν΄

λ©”λ¨λ¦¬μ— μ €μ¥λ λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•λ ¤λ©΄, **κ°€μ¥ λ¨Όμ € CPUλ΅ κ°€μ Έμ™€μ•Ό** ν•λ‹¤.

![](<images/instruction-cycle-step-1.png>)  
_β€λ©”λ¨λ¦¬μ λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•λ ¤λ©΄?β€ ν° νλ¦„_

![](<images/instruction-cycle-step-2.png>)  
_μΈμ¶ μ‚¬μ΄ν΄: κ°€μ¥ λ¨Όμ € CPUλ΅ κ°€μ Έμ¨λ‹¤_

---

### 2) μ‹¤ν–‰ μ‚¬μ΄ν΄

κ°€μ Έμ¨ λ…λ Ήμ–΄λ¥Ό **μ‹¤μ λ΅ μν–‰**ν•λ‹¤.

![](<images/instruction-cycle-step-3.png>)  
_μ‹¤ν–‰ μ‚¬μ΄ν΄: κ°–κ³  μ™”μΌλ©΄ μ‹¤ν–‰ν•΄μ•Ό ν•λ‹¤_

![](<images/instruction-cycle-step-4.png>)  
_μΈμ¶-μ‹¤ν–‰-μΈμ¶-μ‹¤ν–‰β€¦ κΈ°λ³Έ λ°λ³µ_

---

### 3) κ°„μ ‘ μ‚¬μ΄ν΄

κ°€λ”μ€ λ…λ Ήμ–΄λ¥Ό κ°€μ Έμ™€λ„ **λ°”λ΅ μ‹¤ν–‰μ΄ λ¶κ°€λ¥**ν• κ²½μ°κ°€ μλ‹¤.

- λ…λ Ήμ–΄κ°€ β€μ—°μ‚°μ— μ‚¬μ©ν•  λ°μ΄ν„° μ£Όμ†β€λ¥Ό λ°”λ΅ κ°–κ³  μμ§€ μ•κ³   
  **β€μ ν¨ μ£Όμ†μ μ£Όμ†β€™** λ¥Ό κ°–κ³  μλ” κ²½μ°(μ¶”κ°€ λ©”λ¨λ¦¬ μ ‘κ·Ό ν•„μ”)

![](<images/indirect-cycle.png>)  
_μΈμ¶/μ‹¤ν–‰λ§μΌλ΅ λλ‚λ” λ…λ Ήμ–΄λ„ μκ³ , κ°„μ ‘ μ‚¬μ΄ν΄μ΄ ν•„μ”ν• λ…λ Ήμ–΄λ„ μλ‹¤_

![](<images/instruction-cycle-indirect-case.png>)  
_μΈμ¶ ν›„ λ°”λ΅ μ‹¤ν–‰ λ¶κ°€: μ ν¨ μ£Όμ†λ¥Ό μ–»κΈ° μ„ν•΄ λ©”λ¨λ¦¬λ¥Ό ν• λ² λ” μ ‘κ·Ό_

---

## β΅ μΈν„°λ½νΈ

μΈν„°λ½νΈλ” CPUκ°€ β€μ§€κΈ ν•λ μΌβ€μ„ κ³„μ†ν•κΈ°λ³΄λ‹¤, **κΈ‰ν•κ² μ²λ¦¬ν•΄μ•Ό ν•  μΌμ΄ μƒκ²Όμ„ λ•** CPUμ—κ² λ“¤μ–΄μ¤λ” μ‹ νΈλ‹¤.

![](<images/interrupt-overview.png>)  
_CPU: β€μ •ν•΄μ§„ νλ¦„λ€λ΅ μ²λ¦¬ν•΄μ•Όμ§€!β€ β†’ μΈν„°λ½νΈ: β€μ κΉλ§!β€_

---

## π§© μΈν„°λ½νΈ μΆ…λ¥

μΈν„°λ½νΈλ” ν¬κ² 2κ°€μ§€λ΅ κµ¬λ¶„λλ‹¤.

- **λ™κΈ° μΈν„°λ½νΈ(μμ™Έ)**: CPUκ°€ μ‹¤ν–‰ μ¤‘ μκΈ°μΉ λ»ν• μƒν™©μ„ λ§λ‚ λ°μƒ
- **λΉ„λ™κΈ° μΈν„°λ½νΈ(ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ)**: μ…μ¶λ ¥μ¥μΉ λ“±μ΄ CPUμ— μ•λ¦Όμ²λΌ μ”μ²­

![](<images/interrupt-types.png>)  
_λ™κΈ°(μμ™Έ) / λΉ„λ™κΈ°(ν•λ“μ›¨μ–΄) λ¶„λ¥_

### β… λ™κΈ° μΈν„°λ½νΈ(μμ™Έ)

![](<images/sync-interrupt-exception.png>)  
_CPUκ°€ μ‹¤ν–‰ μ¤‘ β€μμ™Έ μƒν™©β€μ„ λ§λ‚λ©΄ λ°μƒ_

### β… λΉ„λ™κΈ° μΈν„°λ½νΈ(ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ)

μ…μ¶λ ¥μ¥μΉλ” CPUλ³΄λ‹¤ λλ¦¬κΈ° λ•λ¬Έμ—, μΈν„°λ½νΈκ°€ μ—†μΌλ©΄ CPUκ°€ κ³„μ† μ™„λ£ μ—¬λ¶€λ¥Ό ν™•μΈν•΄μ•Ό ν•λ‹¤(λΉ„ν¨μ¨).  
μΈν„°λ½νΈκ°€ μμΌλ©΄, CPUλ” **λ‹¤λ¥Έ μΌ**μ„ ν•λ‹¤κ°€ μ™„λ£ μ‹μ μ—λ§ μ²λ¦¬ν•λ©΄ λλ‹¤.

![](<images/async-interrupt-io-1.png>)  
_CPU: β€λ‚ λ‹¤λ¥Έ μΌ ν• κ², λ‹¤ λλ©΄ λ¶λ¬μ¤!β€_

![](<images/async-interrupt-io-2.png>)  
_μ¥μΉ: β€λ‹¤ λμµλ‹λ‹¤!β€ β†’ CPUκ°€ μΈν„°λ½νΈ μ²λ¦¬_

![](<images/async-interrupt-io-3.png>)  
_ν‚¤λ³΄λ“/λ§μ°μ¤ μ…λ ¥λ„ μΈν„°λ½νΈλ΅ μ²λ¦¬ μ”μ²­_

---

## π“¨ μΈν„°λ½νΈ μ”μ²­ μ‹ νΈ

μΈν„°λ½νΈλ” CPU νλ¦„μ„ λλ” κ²ƒμ΄λ―€λ΅, μ¥μΉκ°€ CPUμ—κ² λ¨Όμ €  
β€μ§€κΈ λΌμ–΄λ“¤μ–΄λ„ λλ‚μ”?β€λΌλ” **μ”μ²­ μ‹ νΈ**λ¥Ό λ³΄λ‚Έλ‹¤.

![](<images/interrupt-request-signal.png>)  
_μΈν„°λ½νΈ μ”μ²­ μ‹ νΈ_

---

## π¦ μΈν„°λ½νΈ ν”λκ·Έ

CPUκ°€ μΈν„°λ½νΈλ¥Ό **λ°›μ•„λ“¤μΌμ§€/λ¬΄μ‹ν• μ§€** κ²°μ •ν•λ” λΉ„νΈλ‹¤.  
ν”λκ·Έ λ μ§€μ¤ν„° μ•μ— μ—¬λ¬ ν”λκ·Έκ°€ μκ³ , κ·Έμ¤‘ ν•λ‚κ°€ **μΈν„°λ½νΈ ν”λκ·Έ**λ‹¤.

![](<images/interrupt-flag.png>)  
_ν”λκ·Έ λ μ§€μ¤ν„° μμ‹(μΈν„°λ½νΈ ν”λκ·Έ ν¬ν•¨)_

### MI / NMI

- **MI (Maskable Interrupt)**: μΈν„°λ½νΈ ν”λκ·Έλ΅ λ§‰μ„ μ μλ” μΈν„°λ½νΈ
- **NMI (Non-maskable Interrupt)**: λ§‰μ„ μ μ—†λ”(λ°λ“μ‹ μ²λ¦¬ν•΄μ•Ό ν•λ”) μΈν„°λ½νΈ

![](<images/mi-vs-nmi.png>)  
_MI vs NMI_

---

## π§­ μΈν„°λ½νΈ λ²΅ν„°

CPUκ°€ μΈν„°λ½νΈλ¥Ό λ°›μ•„λ“¤μ΄λ©΄,  
β€μ–΄λ–¤ μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄(ISR)μ„ μ‹¤ν–‰ν•΄μ•Ό ν•μ§€?β€λ¥Ό μ•μ•„μ•Ό ν•λ‹¤.

μ΄λ• ISRμ μ‹μ‘ μ£Όμ†λ¥Ό μ°ΎκΈ° μ„ν• μ‹λ³„ μ •λ³΄κ°€ **μΈν„°λ½νΈ λ²΅ν„°**λ‹¤.

![](<images/interrupt-vector.png>)  
_μ¥μΉκ°€ μΈν„°λ½νΈ μ”μ²­κ³Ό ν•¨κ» β€μΈν„°λ½νΈ λ²΅ν„°β€λ¥Ό μ „λ‹¬_

---

## π§‘β€π”§ μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄(ISR)

μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ€ **μΈν„°λ½νΈλ¥Ό μ²λ¦¬ν•λ” ν”„λ΅κ·Έλ¨**μ΄λ‹¤.  
(ν‚¤λ³΄λ“λ©΄ ν‚¤λ³΄λ“ ISR, ν”„λ¦°ν„°λ©΄ ν”„λ¦°ν„° ISRμ²λΌ μ¥μΉ/μƒν™©λ§λ‹¤ λ‹¤λ¦„)

![](<images/interrupt-service-routine.png>)  
_λ©”λ¨λ¦¬μ—λ” ν„μ¬ ν”„λ΅κ·Έλ¨ + ISRλ“¤μ΄ ν•¨κ» μ΅΄μ¬_

![](<images/interrupt-service-routine-example.png>)  
_CPUλ” μΈν„°λ½νΈ λ²΅ν„°λ¥Ό λ³΄κ³  ν•΄λ‹Ή ISR μ‹μ‘ μ§€μ μΌλ΅ μ΄λ™_

---

## π›  ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ μ²λ¦¬ μμ„

λ€λ¶€λ¶„μ ν•λ“μ›¨μ–΄ μΈν„°λ½νΈλ” μ•„λ νλ¦„μΌλ΅ μ²λ¦¬λλ‹¤.

1. μ¥μΉκ°€ CPUμ— μΈν„°λ½νΈ μ”μ²­ μ‹ νΈλ¥Ό λ³΄λ‚Έλ‹¤.
2. CPUλ” μ‹¤ν–‰ μ‚¬μ΄ν΄μ΄ λλ‚κ³  μΈμ¶ν•κΈ° μ „ μΈν„°λ½νΈ μ—¬λ¶€λ¥Ό ν™•μΈν•λ‹¤.
3. CPUλ” μΈν„°λ½νΈ ν”λκ·Έλ΅ β€λ°›μ•„λ“¤μΌ μ μλ”μ§€β€ ν™•μΈν•λ‹¤.
4. κ°€λ¥ν•λ©΄ ν„μ¬ μ‘μ—…(μƒνƒ)μ„ **λ°±μ—…**ν•λ‹¤.
5. μΈν„°λ½νΈ λ²΅ν„°λ¥Ό ν†µν•΄ ISRμ„ μ‹¤ν–‰ν•λ‹¤.
6. ISR μΆ…λ£ ν›„ λ°±μ—…μ„ λ³µκµ¬ν•κ³  μ›λ μ‘μ—…μ„ μ¬κ°ν•λ‹¤.

### π§Ύ ASCII λ‹¤μ΄μ–΄κ·Έλ¨: μΈν„°λ½νΈ μ²λ¦¬ νλ¦„

```text
[μ¥μΉ] β”€β”€(μ”μ²­ μ‹ νΈ + λ²΅ν„°)β”€β”€> [CPU]
                         |
                         v
        (ν„μ¬ λ…λ Ήμ–΄ μ‹¤ν–‰ μ‚¬μ΄ν΄ μΆ…λ£ μ‹μ )
                         |
                         v
              μΈν„°λ½νΈ ν”λκ·Έ ν™•μΈ
               β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
               β”‚ λ°›μ•„λ“¤μΌ μ X   β”‚β”€β”€> λ¬΄μ‹/λ³΄λ¥ -> λ‹¤μ μΈμ¶
               β””β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                       β”‚ λ°›μ•„λ“¤μ„
                       v
        ν„μ¬ μ‘μ—…(PC/λ μ§€μ¤ν„° λ“±) λ°±μ—…(μ¤νƒ)
                       |
                       v
      μΈν„°λ½νΈ λ²΅ν„°λ΅ ISR μ‹μ‘ μ£Όμ† ν™•μΈ
                       |
                       v
            ISR(μ„λΉ„μ¤ λ£¨ν‹΄) μ‹¤ν–‰
                       |
                       v
        λ°±μ—… λ³µκµ¬ -> μ›λ μ‘μ—… μ¬κ°
```

### π–Ό μ΄λ―Έμ§€λ΅ λ³΄λ” β€λ°±μ—… β†’ ISR μ‹¤ν–‰(PC λ³€κ²½)β€

![](<images/hardware-interrupt-flow-step-1.png>)  
_μΈν„°λ½νΈ μ „: PCκ°€ λ‹¤μ μ‹¤ν–‰ν•  λ…λ Ήμ–΄(μ: 1500λ²μ§€)λ¥Ό κ°€λ¦¬ν‚΄_

![](<images/hardware-interrupt-flow-step-2.png>)  
_μΈν„°λ½νΈ μμ©: PC λ“± ν„μ¬ μƒνƒλ¥Ό μ¤νƒμ— μ €μ¥(λ°±μ—…) ν›„, PCλ¥Ό ISR μ‹μ‘ μ£Όμ†(μ: 10λ²μ§€)λ΅ λ°”κΏ” ISR μ‹¤ν–‰_

---

## β… ν• λ²μ— μ •λ¦¬

- **λ…λ Ήμ–΄ μ‚¬μ΄ν΄**: λ³΄ν†µ `μΈμ¶ β†’ μ‹¤ν–‰` λ°λ³µ, ν•„μ”ν• κ²½μ° `κ°„μ ‘ μ‚¬μ΄ν΄`μ΄ λΌμ–΄λ“¦
- **μΈν„°λ½νΈ**: CPU νλ¦„μ„ μ κΉ λκ³  κΈ‰ν• μΌμ„ λ¨Όμ € μ²λ¦¬ν•κ² ν•λ” μ‹ νΈ
  - λ™κΈ°(μμ™Έ): μ‹¤ν–‰ μ¤‘ μμ™Έ μƒν™©
  - λΉ„λ™κΈ°(ν•λ“μ›¨μ–΄): μ…μ¶λ ¥μ¥μΉ λ“±μ μ•λ¦Ό
- **ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ ν•µμ‹¬ νλ¦„**
  - μ”μ²­ μ‹ νΈ β†’ ν”λκ·Έ ν™•μΈ β†’ μƒνƒ λ°±μ—…(μ¤νƒ) β†’ λ²΅ν„° ν™•μΈ β†’ ISR μ‹¤ν–‰ β†’ λ³µκµ¬/μ¬κ°
