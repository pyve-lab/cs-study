# 교착 상태 (Deadlock)

## 1. 교착 상태란?

- **교착 상태(Deadlock)** 란
    
    여러 프로세스가 **일어나지 않을 사건을 기다리며**
    
    **그 어떤 프로세스도 진행하지 못하고 멈춰 버리는 상태**
    

> ❝ 서로가 서로를 기다리느라
> 
> 
> 아무도 앞으로 나아가지 못하는 상황 ❞
> 

---

## 2. 식사하는 철학자 문제

### 개념 설명

- 여러 명의 철학자가 원탁에 앉아 식사
- 철학자 사이에는 포크가 하나씩 놓여 있음
- 식사를 하기 위해서는 **양쪽 포크를 모두 사용**해야 함

---

### 교착 상태 발생 상황

- 모든 철학자가 **동시에**
    - 왼쪽 포크를 집고
    - 오른쪽 포크를 기다리는 경우

👉 결과:

- 모든 철학자가 포크 하나씩만 들고 대기
- **그 누구도 식사 불가능**
- → 교착 상태 발생

---

## 3. 교착 상태 해결 접근 방법

책에서는 교착 상태를 이해하고 해결하기 위해

다음 두 단계를 제시한다.

---

## 4. ① 교착 상태 상황을 정확히 표현하기

### (자원 할당 그래프)

### 4-1. 자원 할당 그래프란?

- **교착 상태 발생 조건을 시각적으로 표현**하는 그래프
- 다음을 확인할 수 있음:
    - 어떤 프로세스가
        - 어떤 자원을 **할당받아 사용 중인지**
    - 어떤 프로세스가
        - 어떤 자원을 **기다리고 있는지**

---

### 4-2. 자원 할당 그래프 그리는 방법

1. **프로세스** → 원으로 표현
2. **자원의 종류** → 사각형으로 표현
3. **사용 가능한 자원의 개수**
    
    → 자원 사각형 안의 점으로 표현
    
4. **자원을 할당받아 사용 중**
    
    → 자원 → 프로세스로 화살표
    
5. **자원을 기다리는 중**
    
    → 프로세스 → 자원으로 화살표
    

---

### 4-3. 자원 할당 그래프의 특징

- 교착 상태가 발생한 경우:
    - 자원 할당 그래프가 **원형(cycle)** 을 이룸
- 주의점:
    - 원형이 있다고 해서 **무조건 교착 상태는 아님**
    - 하지만 **교착 상태라면 반드시 원형 구조 존재**

---

### 4-4. 식사하는 철학자 문제와 자원 할당 그래프

- 식사하는 철학자 문제 역시
    - 자원 할당 그래프로 표현 가능
- 모든 철학자가 포크를 하나씩 들고
    - 서로의 포크를 기다리는 구조 → **원형 대기**

---

## 5. ② 교착 상태의 근본적인 원인 이해하기

### (교착 상태 발생 조건)

교착 상태는 **다음 네 가지 조건이 모두 만족될 때 발생 가능**

👉 하나라도 만족하지 않으면 교착 상태는 발생하지 않음

---

### 5-1. 상호 배제 (Mutual Exclusion)

- 한 프로세스가 사용 중인 자원은
- **다른 프로세스가 동시에 사용할 수 없음**

예:

- 프린터
- 포크
- 임계 구역

---

### 5-2. 점유와 대기 (Hold and Wait)

- 프로세스가
    - **자원을 하나 이상 점유한 상태에서**
    - 다른 자원을 추가로 기다리는 상태

예:

- 포크 하나를 든 채
- 다른 포크를 기다리는 철학자

---

### 5-3. 비선점 (No Preemption)

- 어떤 프로세스도
    - **다른 프로세스의 자원을 강제로 빼앗을 수 없음**
- 자원은
    - 해당 프로세스가 **자발적으로 반납해야만** 해제됨

👉 선점형 / 비선점형 스케줄링 개념과 연결됨

---

### 5-4. 원형 대기 (Circular Wait)

- 프로세스들이
    - 원의 형태로 서로의 자원을 기다리는 상태
- 자원 할당 그래프에서
    - **사이클 구조**가 나타남

---

## 6. 교착 상태 조건 정리

| 조건 | 설명 |
| --- | --- |
| 상호 배제 | 자원을 동시에 공유 불가 |
| 점유와 대기 | 자원을 쥔 채 다른 자원 대기 |
| 비선점 | 자원을 강제로 빼앗을 수 없음 |
| 원형 대기 | 프로세스들이 원형으로 대기 |

👉 **네 가지 조건이 모두 충족될 때 교착 상태 발생 가능**

---

## 핵심 요약

- 교착 상태는 진행이 완전히 멈춘 상태
- 식사하는 철학자 문제는 대표적인 예
- 자원 할당 그래프로 교착 상태를 시각화 가능
- 교착 상태는 4가지 조건이 모두 만족될 때 발생
- 조건 중 하나라도 깨지면 교착 상태는 발생하지 않음

---

## 한 줄 정리

> ❝ 교착 상태는
> 
> 
> 서로가 서로의 자원을 기다리며
> 
> 아무도 앞으로 나아가지 못하는 상태이다 ❞
>