# 연속 메모리 할당 (Contiguous Memory Allocation)

## 1. 연속 메모리 할당이란?

- **연속 메모리 할당**이란
    
    하나의 프로세스를 **연속된 하나의 메모리 공간**에 할당하는 방식
    
- 프로세스들은
    - 메모리 내에서
    - **덩어리 형태로 연속 배치**

👉 가장 단순한 메모리 관리 방식

---

## 2. 스와핑(Swapping)

### 2-1. 스와핑이란?

- **현재 사용되지 않는 프로세스**를
    - 보조기억장치의 일부 영역인 **스왑 영역(Swap Area)** 으로 옮기고
- 그로 인해 생긴 메모리 공간에
    - **새로운 프로세스를 적재**하는 기법

👉 당장 실행되지 않는 프로세스를 메모리에서 내보내

👉 **현재 필요한 프로세스만 메모리에 유지**

---

### 2-2. 스왑 아웃 / 스왑 인

- **스왑 아웃(Swap-out)**
    - 사용하지 않는 프로세스를
    - 메모리 → 스왑 영역으로 이동
- **스왑 인(Swap-in)**
    - 스왑 영역에 있던 프로세스를
    - 다시 메모리로 적재

---

### 2-3. 스와핑의 장점

- 프로세스들이 요구하는 메모리 크기의 **총합이**
    - 실제 물리 메모리보다 커도
    - 동시에 실행 가능

---

### 2-4. 스와핑 예시 (책 흐름)

- 프로세스 A, B, C, D가 동시에 실행을 원함
- 네 프로세스의 크기 합 > 실제 물리 메모리

### 실행 흐름 예시

1. A 적재
2. B 적재
3. C 적재
4. D를 실행해야 하는데 메모리 부족
    - 현재 B는 당장 실행 필요 없음
    - → **B 스왑 아웃**
    - → **D 스왑 인**
5. 이후 B가 다시 필요해지면
    - A 또는 C를 스왑 아웃
    - B 스왑 인

👉 이 과정이 반복되며

**물리 메모리보다 큰 프로세스 집합을 동시에 실행 가능**

---

### 2-5. 스왑 영역 크기 확인 명령어

- `free`
- `top`

---

## 3. 메모리 할당의 기본 원칙

- 프로세스는
    - **메모리의 빈 공간**에만 할당 가능
- 빈 공간이 여러 개라면?
    - **어디에 할당할 것인가**가 문제

👉 이 문제를 해결하기 위한 방식이

**연속 메모리 할당 기법**

---

## 4. 연속 메모리 할당 방식의 종류

연속 메모리 할당 방식은

**어떤 빈 공간에 배치할 것인가**에 따라 나뉜다.

### 4-1. 최초 적합 (First-Fit)

- 메모리의 빈 공간을 **순서대로 탐색**
- **처음으로 적재 가능한 공간**을 발견하면 즉시 할당

### 특징

- 탐색 시간 최소
- 빠른 할당

---

### 4-2. 최적 적합 (Best-Fit)

- 모든 빈 공간을 **전부 탐색**
- 적재 가능한 공간 중
    - **가장 작은 공간**에 할당

### 특징

- 공간 낭비 최소화 시도
- 탐색 비용 큼

---

### 4-3. 최악 적합 (Worst-Fit)

- 모든 빈 공간을 **전부 탐색**
- 적재 가능한 공간 중
    - **가장 큰 공간**에 할당

### 특징

- 큰 빈 공간을 쪼개 사용
- 오히려 단편화 악화 가능

---

## 5. 연속 메모리 할당의 문제점

### (외부 단편화)

### 5-1. 외부 단편화란?

- 프로세스의 실행과 종료가 반복되면서
    - 메모리 곳곳에 **작은 빈 공간**이 생김
- 이 빈 공간들의 **총합은 충분하지만**
    - **연속되지 않아** 프로세스 적재 불가

👉 이로 인해 메모리가 낭비되는 현상

→ **외부 단편화(External Fragmentation)**

---

### 5-2. 외부 단편화 예시 (책 예제)

- 사용자 영역: **200MB**
- 적재 순서:
    - A: 50MB
    - B: 30MB
    - C: 100MB
    - D: 20MB

### 상황 변화

- B, D 실행 종료
- 빈 공간:
    - 30MB
    - 20MB
- 총 빈 공간: **50MB**

👉 크기 50MB 프로세스 적재 가능?

❌ 불가능

(빈 공간이 **연속적이지 않음**)

---

## 6. 외부 단편화 해결 방법

### 6-1. 메모리 압축 (Compaction)

- 흩어져 있는 빈 공간을
    - **하나의 큰 빈 공간으로 모으는 방식**
- 프로세스를 재배치하여
    - 작은 빈 공간들을 합침

### 문제점

- 프로세스 재배치 비용 발생
- **오버헤드 큼**
- 재배치 동안 프로세스 실행 지연
- 배치 방식 결정이 어려움

👉 실질적으로 사용하기 어려움

---

### 6-2. 가상 메모리 기법 사용 (페이징)

- 외부 단편화 문제의 **근본적 해결책**
- 연속 메모리 할당을 포기
- 이후 등장하는 **페이징 기법** 사용

👉 실제 운영체제에서 가장 널리 사용되는 방식

---

## 핵심 요약

- 연속 메모리 할당은 구조가 단순
- 스와핑을 통해 메모리 활용도 향상 가능
- 최초 / 최적 / 최악 적합 방식 존재
- 하지만 외부 단편화 문제 발생
- 메모리 압축은 비효율적
- **페이징이 근본적인 해결책**

---

## 한 줄 정리

> ❝ 연속 메모리 할당은 이해하기 쉬운 방식이지만,
> 
> 
> 외부 단편화라는 치명적인 한계를 가진다 ❞
>