# 명령어 병렬 처리 기법

## 1️⃣ 명령어 병렬 처리란?

- CPU 성능을 높이기 위한 설계 기법 중 하나
- **여러 개의 명령어를 동시에 처리**하려는 기법
- 하나의 명령어가 끝나기를 기다리지 않고  
  → **겹쳐서 실행**함으로써 처리량을 높임

---

## 2️⃣ 명령어 수준 병렬성 (ILP, Instruction-Level Parallelism)

- **명령어 간의 병렬 실행 가능성**
- 서로 영향을 주지 않는 명령어라면  
  → 동시에 처리 가능
- 명령어 병렬 처리 기법은  
  → 이 명령어 수준 병렬성을 최대한 활용하기 위한 방법

---

## 3️⃣ 파이프라이닝 (Pipelining)

### 🔹 파이프라이닝이란?
- 하나의 명령어 실행 과정을  
  **여러 단계로 나누어 겹쳐서 실행**하는 기법

---

### 🔹 명령어 실행 단계
일반적으로 명령어는 다음 단계로 실행됨
1. 명령어 인출 (Fetch)
2. 명령어 해석 (Decode)
3. 실행 (Execute)
4. 결과 저장 (Write Back)

---

### 🔹 파이프라이닝의 동작 방식
- 각 단계가 동시에 다른 명령어를 처리
- 예:
  - 한 명령어는 실행 단계
  - 다른 명령어는 해석 단계
  - 또 다른 명령어는 인출 단계

---

### 🔹 파이프라이닝의 효과
- 한 명령어의 **실행 시간이 줄어드는 것은 아님**
- 하지만 **전체 처리량(throughput)**은 증가

---

## 4️⃣ 파이프라인 위험 (Pipeline Hazard)

- 파이프라이닝이 항상 효율적인 것은 아님
- 명령어를 겹쳐 실행할 수 없는 상황 발생 → **파이프라인 위험**

---

### 🔹 데이터 위험 (Data Hazard)
- 이전 명령어의 실행 결과가  
  → 다음 명령어에 필요할 때 발생
- 결과가 아직 나오지 않아  
  → 다음 명령어를 실행할 수 없음

---

### 🔹 제어 위험 (Control Hazard)
- 분기 명령어로 인해  
  → 다음에 실행할 명령어를 미리 알 수 없는 경우
- 잘못 예측하면  
  → 파이프라인을 비워야 함

---

### 🔹 구조적 위험 (Structural Hazard)
- 동시에 사용하려는 하드웨어 자원이 부족한 경우
- 예:
  - 하나의 자원을 여러 단계에서 동시에 사용하려 할 때

---

## 5️⃣ 슈퍼스칼라 (Superscalar)

### 🔹 슈퍼스칼라란?
- **한 클럭에 여러 개의 명령어를 처리**하는 구조
- 여러 개의 실행 장치를 두어  
  → 동시에 여러 명령어 실행

---

### 🔹 특징
- 파이프라이닝과 함께 사용됨
- 명령어 간의 의존성이 없을 경우  
  → 동시에 실행 가능

---

### 🔹 한계
- 모든 명령어를 동시에 실행할 수는 없음
- 명령어 간 의존성에 따라 성능이 제한됨

---

## 6️⃣ 비순차적 명령어 처리 (Out-of-Order Execution)

### 🔹 개념
- 명령어를 **프로그램에 작성된 순서와 다르게 실행**
- 실행이 가능한 명령어부터 먼저 처리

---

### 🔹 목적
- 데이터 위험 등으로 인해  
  → 실행이 지연되는 상황을 최소화
- 파이프라인의 **유휴 시간 감소**

---

### 🔹 주의점
- 실행 순서와 상관없이  
  → **결과는 프로그램 순서대로 반영**

---

## 7️⃣ 정리

- 명령어 병렬 처리는  
  → **여러 명령어를 겹쳐 실행하여 성능을 높이는 기법**
- 대표적인 방법
  - 파이프라이닝
  - 슈퍼스칼라
  - 비순차적 명령어 처리
- 하지만
  - 데이터 위험
  - 제어 위험
  - 구조적 위험  
  과 같은 제약이 존재

---

## ✅ 핵심 요약
- 명령어 병렬 처리 = 명령어 실행을 겹쳐서 수행
- 파이프라이닝은 처리량을 증가시킴
- 파이프라인 위험이 성능을 제한
- 슈퍼스칼라와 비순차적 실행은  
  → 이러한 한계를 완화하기 위한 기법
